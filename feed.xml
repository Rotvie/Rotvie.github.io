<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://rotvie.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://rotvie.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-11-29T16:47:35+00:00</updated><id>https://rotvie.github.io/feed.xml</id><title type="html">Ricardo Huaman</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Setting Up and Running microROS on the Raspberry Pi Pico</title><link href="https://rotvie.github.io/blog/2023/uros/" rel="alternate" type="text/html" title="Setting Up and Running microROS on the Raspberry Pi Pico"/><published>2023-06-08T00:00:00+00:00</published><updated>2023-06-08T00:00:00+00:00</updated><id>https://rotvie.github.io/blog/2023/uros</id><content type="html" xml:base="https://rotvie.github.io/blog/2023/uros/"><![CDATA[<h2 id="introduction">Introduction</h2> <p>In the rapidly evolving world of robotics and embedded systems, microROS is a game-changer. It brings the capabilities of ROS (Robot Operating System) 2 to microcontrollers, facilitating the development of robust and interactive systems. The Raspberry Pi Pico, with its powerful RP2040 chip, provides an excellent platform for such applications.</p> <p>This tutorial will guide you through setting up and running microROS on the Raspberry Pi Pico. By the end of this tutorial, youâ€™ll be equipped to leverage the power of microROS on your Raspberry Pi Pico <d-cite key="RoboFoundry_2022"></d-cite> <d-cite key="ubuntuGettingStarted"></d-cite> <d-cite key="micro-ros-agent-ros"></d-cite> <d-cite key="micro-ros-agent-github"></d-cite>.</p> <p>For the corresponding <strong>YouTube tutorial</strong>, click <a href="https://youtu.be/_4aLzvG6dfw?si=oyEmNZsfEt8569Nv">here</a>.</p> <hr/> <h2 id="setting-up-the-environment">Setting up the Environment</h2> <p>Install the necessary dependencies with the following command:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>cmake g++ gcc-arm-none-eabi doxygen libnewlib-arm-none-eabi git python3 build-essential
</code></pre></div></div> <p>Configure the environment:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"export PICO_TOOLCHAIN_PATH=..."</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo</span> <span class="s2">"export PICO_SDK_PATH=</span><span class="nv">$HOME</span><span class="s2">/micro_ros_ws/src/pico-sdk"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</code></pre></div></div> <h2 id="pico-sdk-and-microros">Pico-SDK and microROS</h2> <p>Create the workspace and clone the required repositories:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/micro_ros_ws/src
<span class="nb">cd</span> ~/micro_ros_ws/src
git clone <span class="nt">--recurse-submodules</span> https://github.com/raspberrypi/pico-sdk.git
git clone https://github.com/Rotvie/micro_ros_raspberrypi_pico_sdk.git
</code></pre></div></div> <h2 id="compilation-and-loading">Compilation and Loading</h2> <p>Compile the microROS code to generate the UF2 file, which will be loaded onto the Raspberry Pi Pico:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>micro_ros_raspberrypi_pico_sdk
<span class="nb">mkdir </span>build
<span class="nb">cd </span>build
cmake ..
make
</code></pre></div></div> <p>To load the UF2 file, connect the Pico while holding the BOOTSEL button, then run:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>build/pico_micro_ros_example.uf2 /media/<span class="nv">$USER</span>/RPI-RP2
</code></pre></div></div> <h2 id="configuring-the-microros-agent">Configuring the microROS agent</h2> <p>Install and configure the microROS agent:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap <span class="nb">install </span>micro-ros-agent
<span class="nb">sudo </span>snap <span class="nb">set </span>core experimental.hotplug<span class="o">=</span><span class="nb">true
sudo </span>systemctl restart snapd
snap interface serial-port
snap connect micro-ros-agent:serial-port snapd:pico
</code></pre></div></div> <h2 id="running-the-microros-example-demo">Running the microROS example demo</h2> <p>To start the microROS node, run:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>micro-ros-agent serial <span class="nt">--dev</span> /dev/ttyACM0 <span class="nv">baudrate</span><span class="o">=</span>115200
</code></pre></div></div> <p>Check the available topics with:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 topic list
</code></pre></div></div> <h2 id="connecting-the-pico-with-a-raspberry-pi-instead-of-a-pc">Connecting the Pico with a Raspberry Pi Instead of a PC</h2> <p>For a Raspberry Pi setup, follow the instructions up to the Configuring the microROS agent section. However, if you encounter an error when installing the micro-ros-agent with snap (e.g., <code class="language-plaintext highlighter-rouge">error: snap "micro-ros-agent" is not available on stable for this architecture (arm64)</code>), follow these steps:</p> <ol> <li>Set up a new ROS 2 workspace for the microROS agent:</li> </ol> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.bash
<span class="nb">mkdir </span>uros_ws <span class="o">&amp;&amp;</span> <span class="nb">cd </span>uros_ws
git clone <span class="nt">-b</span> <span class="nv">$ROS_DISTRO</span> https://github.com/micro-ROS/micro_ros_setup.git src/micro_ros_setup
rosdep update <span class="o">&amp;&amp;</span> rosdep <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">-y</span>
colcon build
<span class="nb">source install</span>/local_setup.bash
</code></pre></div></div> <ol> <li>Build the microROS Agent manually:</li> </ol> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run micro_ros_setup create_agent_ws.sh
ros2 run micro_ros_setup build_agent.sh
<span class="nb">source install</span>/local_setup.sh
</code></pre></div></div> <ol> <li>Start the microROS Agent:</li> </ol> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 run micro_ros_agent micro_ros_agent <span class="nt">--dev</span> /dev/ttyACM0 <span class="nv">baudrate</span><span class="o">=</span>115200
</code></pre></div></div>]]></content><author><name>Ricardo Huaman</name></author><category term="ros,"/><category term="microROS,"/><category term="microcontroller,"/><category term="robotics"/><summary type="html"><![CDATA[A tutorial on how to get microROS and ROS2 working together]]></summary></entry></feed>